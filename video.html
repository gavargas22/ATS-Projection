<!DOCTYPE HTML>
<html>
  <head>
  <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/page-style.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  <script type="text/javascript" src="http://at-utep.github.io/libraries/kineticjs/kinetic.min.js"></script>
    <title>Video Example with Canvas</title>

  <body>

  <!-- Below are the canvases that will contain the cutouts of the videos. 
    id="canvas(n)+1"
  -->
      <canvas id="canvas1" class="canvasIdentifier"></canvas>
      <canvas id="canvas2" class="canvasIdentifier"></canvas>
    <video id="v1" class="videoWrapper"><source src="http://www.craftymind.com/factory/html5video/BigBuckBunny_640x360.mp4"></video>
    <video id="v2" class="videoWrapper"><source src="http://techslides.com/demos/sample-videos/small.mp4"></video>

<script>

//Create an array of videos for use later.
var videoArray = [
        'http://www.craftymind.com/factory/html5video/BigBuckBunny_640x360.mp4',
        'http://techslides.com/demos/sample-videos/small.mp4',
        ];
//Count the number of videos in the array.
numberOfVideos = videoArray.length;

//Create the contexts for the different canvases that we have.
var context1 = document.getElementById('canvas1').getContext('2d');
var context2 = document.getElementById('canvas2').getContext('2d');

//Assign variables to the videos so we can access the properties of the videos through JS after that autoplay and loop the video indefinitely.

var video1 = document.getElementById('v1');
video1.autoplay = true;
video1.loop = true;
video1.muted = true;


var video2 = document.getElementById('v2');
video2.autoplay = true;
video2.loop = true;
video2.muted = true;




/*v.autoplay = true;
v.loop = false;*/

window.onload = function(){

  //Draw the polygon where the video will be played.
  
  //Video 1
  context1.save();
  context1.beginPath();
  context1.moveTo(10,10);
  context1.lineTo(500, 150);
  context1.lineTo(300, 250);
  context1.lineTo(278, 265);
  context1.closePath();
  context1.stroke();
  context1.lineWidth = 1;
  context1.clip();

  
  //Video 2
  context2.save();
  context2.beginPath();
  context2.moveTo(11,10);
  context2.lineTo(501, 10);
  context2.lineTo(-100, 678);
  context2.lineTo(600, 500);
  context2.closePath();
  context2.stroke();
  context2.lineWidth = 1;
  context2.clip();



  //Video Stuff
  video1.addEventListener('play', function() {
    draw(this, context1, 640, 360);
    console.trace('Video1 is playing');
  }, false);

  video2.addEventListener('play', function() {
    draw(this, context2, 640, 360);
    console.trace('Video2 is playing');
  }, false);

};

function draw() {
  context1.drawImage(video1, 0, 0, 640, 360);
  context2.drawImage(video2, 0, 0, 640, 360);
  setTimeout(draw, 20, video1, context1, 640, 360);
}

</script>




<style>

body {
  margin: 0;
}

#c {
  -moz-transform:rotate(20deg);
  -webkit-transform:rotate(20deg);
  -o-transform:rotate(20deg);
  -ms-transform:rotate(20deg);
  transform:rotate(20deg);
}
#c {
    position: absolute;
    top: 50%;
    bottom: 50%;
    left: 50%;
    right: 50%;
    width: 400px;
    height: 400px;
}
.canvasIdentifier {
    position: absolute;
    top: 0;
    left: 50%;
    right: 50%;
    width: 500px;
    height: 500px;
}

.videoWrapper {
    /*visibility: hidden;*/
    display: none;
}
</style>
  </body>
</html>